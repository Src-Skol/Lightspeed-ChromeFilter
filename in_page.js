!function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[s]={exports:{}};t[s][0].call(d.exports,(function(e){return n(t[s][1][e]||e)}),d,d.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){(function(t){(function(){const r=document.createElement("A");r.href=window.location.href;const o=e("./in_page/in_page_flags");let n,s,a,l;t.comms=chrome.runtime.connect({name:"inPage"}),r.hostname.match("(^|.)youtube.")&&(window.onpopstate=function(e){window.location.reload()});const c=function(e){e.stopPropagation(),e.preventDefault(),comms.postMessage({action:"override",rg:n.id})};const d=function(e){e.preventDefault(),e.stopPropagation();const t=document.getElementById("code").value;comms.postMessage({action:"lockoutOverride",rg:n.id,code:t})};const h=chrome.extension.getURL("blocked-yt-avatar.png"),u=function(){[...document.querySelectorAll("#avatar")].forEach(e=>{[...e.getElementsByTagName("img")].forEach(e=>{e.src!==h&&(e.src=h)})})},m=function(){const e=document.createElement("A");if(e.href=window.location.href,e.hostname.match(/(^|\.)youtube\./)&&(e.pathname.match(/^\/user\/[^\/\?]+$/)||e.pathname.match(/^\/channel\/[^\/\?]+$/)||e.pathname.match(/^\/c\/[^\/\?]+$/)||e.pathname.match(/\/featured$/))){const e=document.getElementsByTagName("video");if(e.length>0)for(i in e)if("function"==typeof e[i].pause){e[i].paused||(console.debug("[LS Filter] pause autoplay"),e[i].pause());const t=e[i].closest("ytd-channel-video-player-renderer");t&&"none"!==t.style.display&&(console.debug("[LS Filter] hide autoplay container"),t.style.display="none")}}},g=function(){const e=document.getElementById("video-preview-container");e&&e.remove();const t=document.getElementsByTagName("ytd-miniplayer");t.length>0&&t[0].remove(),document.querySelectorAll("div#mouseover-overlay").forEach(e=>{e.remove()}),document.querySelectorAll("div#hover-overlays").forEach(e=>{e.remove()})},f=function(){const e=document.getElementById("read-only-flash-notice");let t=0;const r=setInterval(()=>{t++;const o=100-t;o<1?(clearInterval(r),e.style.display="none"):e.style.opacity=(o/100).toString()},15);clearTimeout(window.readOnlyNoticeTimeout)};const p=[];let y=!1;function b(){if(y){console.debug("[LS Filter] scanned image count:",p.length);const e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++){let r;const o=e[t],n=unescape(unescape(o.href));if(n.match(/imgres\?imgurl=/)||n.match(/google\.com\/url\?/)){const e=o.children[1]||o.children[0];e&&(""!==e.id?r=e.id:(r=Math.random().toString(36).substring(2,15),e.id=r),p.includes(r)||(p.push(r),comms.postMessage({action:"scoreImage",imgId:r,imgUrl:n})))}}}y=!1,setTimeout(b,3e3)}function w(e){e.filteringDisabled||(function(e,t){if(Array.isArray(t)||(t=[]),e&&e.length>0){let n;const i=new o(r);i.Initialize(e,t).then(()=>{void 0!==n&&clearInterval(n);const e=()=>{try{window.location.href!==r.href&&(r.href=window.location.href);const e=i.Scan();Array.isArray(e)&&e.length>0&&i.Report(e)}catch(e){console.error(e)}};n=setInterval(e,5e3),e()}).catch(console.error)}}(e.terms,e.ignoredSites),r.hostname.match(/(^|\.)youtube\./)&&function(e){if(void 0===e)return;const t=document.createElement("STYLE");if(t.type="text/css",t.innerText="",e.hide_sidebar&&(console.debug("[LS Filter] hide sidebar"),t.innerText+=".watch-sidebar, .ytd-watch-next-secondary-results-renderer {display: none !important;}\n"),e.hide_comments&&(console.debug("[LS Filter] hide comments"),t.innerText+="#watch-discussion, .watch-discussion, ytd-comments {display: none !important;}\n"),""!==t.innerText){let e=document.getElementsByTagName("head");e&&e.length>0&&(e=e[0],e.append(t))}e.disable_chan_autoplay&&(console.debug("[LS Filter] disable autoplay"),void 0!==s&&(clearInterval(s),s=void 0),m(),s=setInterval(m,1e3)),e.block_thumbnails&&(console.debug("[LS Filter] block thumbnails"),void 0!==a&&(clearInterval(a),a=void 0),u(),a=setInterval(u,1e3)),console.debug("[LS Filter] hide miniplayers"),void 0!==l&&(clearInterval(l),l=void 0),g(),l=setInterval(g,1e3)}(e.ytSettings),e.readOnly&&function(e){if(document.documentElement&&document.documentElement.clientHeight<250)return;const t=document.createElement("div");t.id="read-only-flash-notice",t.style.display="block",t.style.position="fixed",t.style.top="16px",t.style.right="16px",t.style.background="#343d47",t.style.borderRadius="4px",t.style.boxShadow="0 2px 4px rgba(0,0,0,0.25)",t.style.color="#ffffff",t.style.maxWidth="400px",t.style.overflow="hidden",t.style["z-index"]="2147483647";const r=document.createElement("div");r.style.float="left",r.style.padding="16px";const o=document.createElement("div");o.innerText=e;const n=document.createElement("div");n.style.borderLeftStyle="solid",n.style.borderLeftWidth="1px",n.style.borderColor="#505861",n.style.float="left";const i=document.createElement("a");i.style.color="#ffffff",i.style.cursor="pointer",i.style.display="block",i.style.padding="16px",i.style.textDecoration="none",i.innerText="Dismiss",i.addEventListener("click",f),i.addEventListener("mouseenter",e=>{e.target.style.textDecoration="underline"}),i.addEventListener("mouseleave",e=>{e.target.style.textDecoration="none"}),r.appendChild(o),t.appendChild(r),n.appendChild(i),t.appendChild(n),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("read-only-flash-notice").style.setProperty("font-size","16px","important"),window.readOnlyNoticeTimeout=setTimeout(()=>{f()},8e3)}("This website is in read only mode."),void 0!==e.blockPageURI&&function(e,t){const r=new RegExp(e.replace(/[\]{}?^$().*\\+|[]/g,"\\$&"),"i");if(window.location.href.match(r)){const e=JSON.parse(document.getElementById("translations").value),r=t||"en";void 0===e[r]&&(r="en");document.querySelectorAll("[data-translation]").forEach(t=>{t.hasAttribute("placeholder")?t.setAttribute("placeholder",e[r][t.dataset.translation]):t.innerText=e[r][t.dataset.translation]});const o=window.location.search.replace(/\?/,"").split("=");n={};for(let e=0,t=o.length;e<t;e++)n[o[0]]=o[1];n.id&&comms.postMessage({action:"blockInfo",rg:n.id,locale:r})}}(e.blockPageURI,e.locale))}comms.onMessage.addListener(e=>{switch(console.debug("[LS Filter] comms message",e),e.action){case"settings":w(e);break;case"imageScan":y=!0,b(),new MutationObserver(e=>{e.length>0&&(y=!0)}).observe(document,{childList:!0,subtree:!0});break;case"imageScored":!function(e){if(e.blocked){console.debug("[LS Filter] image blocked",e.imgId);const t=document.getElementById(e.imgId);t&&t.src&&(t.src=chrome.extension.getURL("blocked-image-search.png"))}}(e);break;case"blockInfo":!function(e){const t=e.locale,o=(document.createElement("A"),JSON.parse(document.getElementById("categories").value)),n=JSON.parse(document.getElementById("translations").value);r.href=e.url,document.getElementById("host").innerText=e.host||r.hostname,document.getElementById("username").innerText=e.username,document.getElementById("ip").innerText=e.ip;let i="";const s=document.getElementsByClassName("blockScreen-stripe")[0];switch(e.reason){case"yt":i=n[t].org_youtube_rules;break;case"url":i=n[t].custom_block_list;break;case"ext":i=n[t].file_ext_blocked;break;case"wz":i=n[t].webzone_rule;break;case"search":i=n[t].search_term_used;break;case"lockout":const r=document.getElementById("override");return document.getElementsByClassName("blockScreen")[0].className+=" lockoutScreen",document.getElementById("minutes").innerText=e.lockoutTime,r.className=r.className.replace(/hidden/,""),void(r.onclick=d);case"off":s&&(s.innerText=n[t].access_disabled,s.style["font-size"]="145%",s.style["font-weight"]="bolder",s.style.color="#FFF");break;case"parent":s&&(s.innerText="Parental Pause Active",s.style["font-size"]="145%",s.style["font-weight"]="bolder",s.style.color="#FFF");break;default:i=`${n[t].categorized_as} ${o[e.catId]}`}document.getElementById("reason").innerText=i;const a=document.getElementById("override-time");if(a&&(a.style.display="none"),e.overridable){if(e.override&&e.override.timeout){const t=document.getElementById("override-duration");t&&(t.innerText=e.override.timeout/6e4),a&&(a.style.display="block")}const t=document.getElementById("override");t&&(t.className=t.className.replace(/hidden/,""),t.onclick=c)}}(e.blockInfo);break;case"override":(t=e).url?window.location=t.url:t.err&&alert(t.err);break;case"lockoutOverride":!function(e){e.lockoutRedirectUrl?window.location=e.lockoutRedirectUrl:e.err&&alert(e.err)}(e)}var t}),comms.postMessage({action:"settings",href:window.location.href})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./in_page/in_page_flags":6}],2:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="facebook",e.hostname.match(/\.?facebook\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const e=[];return document.querySelectorAll('[data-text="true"]').forEach(t=>{e.push(t.innerText)}),e}}},{}],3:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="gmail",e.hostname.match(/mail\.google\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const e=[];return document.querySelectorAll('[role="textbox"]').forEach(t=>{e.push(t.innerText)}),e}}},{}],4:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="google_doc",e.hostname.match(/docs\.google\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;return[document.body.innerText]}}},{}],5:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="google",e.hostname.match(/^(www\.)?google\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const e=[];return document.querySelectorAll('form[action="/search"] input[type="text"][name="q"]').forEach(t=>{e.push(t.value)}),e}}},{}],6:[function(e,t,r){const o=["change","keyup"],n=e("./facebook_flags"),i=e("./twitter_flags"),s=e("./gmail_flags"),a=e("./google_flags"),l=e("./google_doc_flags"),c=e("./ms_office_flags");t.exports=class{constructor(e){if(void 0===e)throw new Error("url object required");this.UrlObject=e,this.terms=[],this.lastBodyText="",this.target={},this.initialized=!1,this.reportedTerms={},this.modules=[];const t=new n(e);t.disabled||this.modules.push(t);const r=new i(e);r.disabled||this.modules.push(r);const o=new s(e);o.disabled||this.modules.push(o);const d=new a(e);d.disabled||this.modules.push(d);const h=new l(e);h.disabled||this.modules.push(h);const u=new c(e);u.disabled||this.modules.push(u)}DOMExtractAndScan(e){if(void 0===e.target)throw new Error("event has no target");let t,r;switch(e.type){case"scan":r="GatherIntent";break;default:r=e.target.tagName.toLowerCase()}switch(r){case"input":let r=e.target.type||"text";if(r=r.toLowerCase(),"password"===r)break;t=[e.target.value];break;case"textarea":t=[e.target.value];break;case"div":if(e.target.attributes&&e.target.attributes.role&&"textbox"===e.target.attributes.role.value){t=[e.target.innerText];break}default:t=[],this.modules.forEach(e=>{if("function"==typeof e.GatherIntent){const r=e.GatherIntent();"string"==typeof r?t.push(r):Array.isArray(r)&&(t=t.concat(r))}})}void 0!==t&&t.forEach(e=>{if(""===e)this.target.RelayFlaggedTerms={};else{void 0===this.target.RelayFlaggedTerms&&(this.target.RelayFlaggedTerms={});const t=this.Scan(e),r=[];t.forEach(e=>{const t=e[0],o=e[1];e[2]=!0,void 0===this.target.RelayFlaggedTerms[t]?(this.target.RelayFlaggedTerms[t]=o,r.push(e)):this.target.RelayFlaggedTerms[t]<o&&(e[1]=o-this.target.RelayFlaggedTerms[t],this.target.RelayFlaggedTerms[t]+=e[1],r.push(e))}),r.length>0&&this.Report(r)}})}HandleDOM_change(e){if(void 0===e)throw new Error("event required");if("change"!==e.type)throw new Error("event must be a change event");if(void 0===e.target)throw new Error("event has no target");void 0!==e.target.tagName&&(this.ShouldIgnore()||this.DOMExtractAndScan(e))}HandleDOM_keyup(e){if(void 0===e)throw new Error("event required");if("keyup"!==e.type)throw new Error("event must be a keyup event");if(void 0===e.target)throw new Error("event has no target");void 0!==e.target.tagName&&(this.ShouldIgnore()||this.DOMExtractAndScan(e))}HandleDOM(e){if(void 0===e)throw new Error("event required");if(-1===o.indexOf(e.type))throw new Error("unsupported event type - "+e.type);"function"==typeof this["HandleDOM_"+e.type]&&this["HandleDOM_"+e.type](e)}BindToDOM(){document.addEventListener("change",this.HandleDOM.bind(this)),document.addEventListener("keyup",this.HandleDOM.bind(this)),setInterval(()=>{this.DOMExtractAndScan(new Event("scan"))},1e3)}Initialize(e,t){if(!Array.isArray(e))throw new Error("terms required");if(!Array.isArray(t))throw new Error("ignoredSites required");return new Promise((r,o)=>{this.terms=[],e.forEach(e=>{const t={term:e};let r=e.replace(/[\]{}?^$().*\\+|[]/g,"\\$&");r=r.replace(/\\\*/g,".*"),r=r.replace(/\\\?/g,"."),t.regex=new RegExp("\\b"+r+"\\b","gi"),this.terms.push(t)}),this.ignoredSites=t,this.initialized=!0,this.BindToDOM(),r()})}SiteMatchers(){if(void 0!==this.siteMatchers)return this.siteMatchers;if(!Boolean(this.initialized))throw new Error("Initialization required");try{this.siteMatchers=[],this.ignoredSites.forEach(e=>{if("object"==typeof e)Boolean(e.r)&&this.siteMatchers.push(new RegExp(e.url,"i"));else if("string"==typeof e)if(e.match(/^([\w\d-]{1,63}\.)+[\w\d-]{1,63}$/i))this.siteMatchers.push(e.toLowerCase().split("."));else{let t=e.replace(/[\]{}?^$().*\\+|[]/g,"\\$&");t=t.replace(/\\\*/g,".*"),this.siteMatchers.push(new RegExp("^"+t+"$","i"))}})}catch(e){throw this.siteMatchers=void 0,e}return this.siteMatchers}ShouldIgnore(){if(!Boolean(this.initialized))throw new Error("Initialization required");let e=!1;const t=this.UrlObject.hostname.toLowerCase().split(".");return this.SiteMatchers().some(r=>{if("[object Array]"===Object.prototype.toString.call(r)){const o=r.length,n=r.length;if(o<=n){for(let e=0;e<o;e++)if(r[o-1-e]!==t[n-1-e])return!1;return e=!0,!0}}else if(this.UrlObject.href.match(r))return e=!0,!0}),e}Scan(e){const t=[];let r="",o=!1;if(!Boolean(this.initialized))throw new Error("Initialization required");if(void 0!==e&&"string"!=typeof e)throw new Error("string required");if(this.ShouldIgnore())return t;if(void 0===this.reportedTerms[this.UrlObject.href]&&(this.reportedTerms[this.UrlObject.href]={}),void 0===e){if(r=document.body.innerText,r===this.lastBodyText)return}else r=e,o=!0;return this.terms.forEach(e=>{const n=r.match(e.regex);null!=n&&n.length>0&&(void 0===this.reportedTerms[this.UrlObject.href][e.term]?(t.push([e.term,n.length]),this.reportedTerms[this.UrlObject.href][e.term]=n.length):o&&t.push([e.term,n.length]))}),t}Report(e){if(!Array.isArray(e))throw new Error("flags must be an array");0!==e.length&&comms.postMessage({action:"flags",flags:{href:this.UrlObject.href,hits:e}})}}},{"./facebook_flags":2,"./gmail_flags":3,"./google_doc_flags":4,"./google_flags":5,"./ms_office_flags":7,"./twitter_flags":8}],7:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="ms_office",this.hostname=e.hostname.toLowerCase(),this.disabled=this.setDisabled()}GatherIntent(){if(this.disabled)return;return[document.body.innerText]}setDisabled(){const e=this.hostname.split("."),t=e.length;if(!e[t-2])return!0;let r=e[t-2],o=e[t-3];switch("co"===r&&"uk"===e[t-1]&&(r=e[t-3],o=e[t-4]),r){case"live":case"office":case"office365":break;default:return!0}switch(o){case"officeapps":case"outlook":return!1;default:return!0}}}},{}],8:[function(e,t,r){t.exports=class{constructor(e){if(void 0===e)throw new Error("URL Object required");this.disabled=!0,this.moduleName="twitter",e.hostname.match(/\.?twitter\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const e=[];return document.querySelectorAll(".tweet-box.rich-editor").forEach(t=>{e.push(t.innerText)}),e}}},{}]},{},[1]);